{"name":"Nix","scopeName":"source.nix","patterns":[{"include":"#expression"}],"repository":{"attribute-bind":{"patterns":[{"include":"#attribute-name"},{"include":"#attribute-bind-from-equals"}]},"attribute-bind-from-equals":{"begin":"\\=","end":"\\;","patterns":[{"include":"#expression"}],"beginCaptures":{"0":{"name":"keyword.operator.bind.nix"}},"endCaptures":{"0":{"name":"punctuation.terminator.bind.nix"}}},"attribute-inherit":{"begin":"\\binherit\\b","end":"\\;","patterns":[{"begin":"\\(","end":"(?=\\;)","patterns":[{"begin":"\\)","end":"(?=\\;)","patterns":[{"include":"#bad-reserved"},{"include":"#attribute-name-single"},{"include":"#others"}],"beginCaptures":{"0":{"name":"punctuation.section.function.arguments.nix"}}},{"include":"#expression"}],"beginCaptures":{"0":{"name":"punctuation.section.function.arguments.nix"}}},{"begin":"(?=[a-zA-Z\\_])","end":"(?=\\;)","patterns":[{"include":"#bad-reserved"},{"include":"#attribute-name-single"},{"include":"#others"}]},{"include":"#others"}],"beginCaptures":{"0":{"name":"keyword.other.inherit.nix"}},"endCaptures":{"0":{"name":"punctuation.terminator.inherit.nix"}}},"attribute-name":{"patterns":[{"name":"entity.other.attribute-name.multipart.nix","match":"\\b[a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*"},{"match":"\\."},{"include":"#string-quoted"},{"include":"#interpolation"}]},"attribute-name-single":{"name":"entity.other.attribute-name.single.nix","match":"\\b[a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*"},"attrset-contents":{"patterns":[{"include":"#attribute-inherit"},{"include":"#bad-reserved"},{"include":"#attribute-bind"},{"include":"#others"}]},"attrset-definition":{"begin":"(?=\\{)","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"begin":"(\\{)","end":"(\\})","patterns":[{"include":"#attrset-contents"}],"beginCaptures":{"0":{"name":"punctuation.definition.attrset.nix"}},"endCaptures":{"0":{"name":"punctuation.definition.attrset.nix"}}},{"begin":"(?\u003c=\\})","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#expression-cont"}]}]},"attrset-definition-brace-opened":{"patterns":[{"begin":"(?\u003c=\\})","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#expression-cont"}]},{"begin":"(?=.?)","end":"\\}","patterns":[{"include":"#attrset-contents"}],"endCaptures":{"0":{"name":"punctuation.definition.attrset.nix"}}}]},"attrset-for-sure":{"patterns":[{"begin":"(?=\\brec\\b)","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"begin":"\\brec\\b","end":"(?=\\{)","patterns":[{"include":"#others"}],"beginCaptures":{"0":{"name":"keyword.other.nix"}}},{"include":"#attrset-definition"},{"include":"#others"}]},{"begin":"(?=\\{\\s*(\\}|[^,?]*(=|;)))","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#attrset-definition"},{"include":"#others"}]}]},"attrset-or-function":{"begin":"\\{","end":"(?=([\\])};]|\\b(else|then)\\b))","patterns":[{"begin":"(?=(\\s*\\}|\\\"|\\binherit\\b|\\b[a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*(\\s*\\.|\\s*=[^=])|\\$\\{[a-zA-z0-9\\_\\'\\-]+\\}(\\s*\\.|\\s*=[^=])))","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#attrset-definition-brace-opened"}]},{"begin":"(?=(\\.\\.\\.|\\b[a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*\\s*[,?]))","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#function-definition-brace-opened"}]},{"include":"#bad-reserved"},{"begin":"\\b[a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*","end":"(?=([\\])};]|\\b(else|then)\\b))","patterns":[{"begin":"(?=\\.)","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#attrset-definition-brace-opened"}]},{"begin":"\\s*(\\,)","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#function-definition-brace-opened"}],"beginCaptures":{"1":{"name":"keyword.operator.nix"}}},{"begin":"(?=\\=)","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#attribute-bind-from-equals"},{"include":"#attrset-definition-brace-opened"}]},{"begin":"(?=\\?)","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#function-parameter-default"},{"begin":"\\,","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#function-definition-brace-opened"}],"beginCaptures":{"0":{"name":"keyword.operator.nix"}}}]},{"include":"#others"}],"beginCaptures":{"0":{"name":"variable.parameter.function.maybe.nix"}}},{"include":"#others"}],"beginCaptures":{"0":{"name":"punctuation.definition.attrset-or-function.nix"}}},"bad-reserved":{"name":"invalid.illegal.reserved.nix","match":"(?\u003c![\\w'-])(if|then|else|assert|with|let|in|rec|inherit)(?![\\w'-])"},"comment":{"patterns":[{"name":"comment.block.nix","begin":"/\\*([^*]|\\*[^\\/])*","end":"\\*\\/","patterns":[{"include":"#comment-remark"}]},{"name":"comment.line.number-sign.nix","begin":"\\#","end":"$","patterns":[{"include":"#comment-remark"}]}]},"comment-remark":{"match":"(TODO|FIXME|BUG|\\!\\!\\!):?","captures":{"1":{"name":"markup.bold.comment.nix"}}},"constants":{"patterns":[{"begin":"\\b(builtins|true|false|null)\\b","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#expression-cont"}],"beginCaptures":{"0":{"name":"constant.language.nix"}}},{"begin":"\\b(scopedImport|import|isNull|abort|throw|baseNameOf|dirOf|removeAttrs|map|toString|derivationStrict|derivation)\\b","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#expression-cont"}],"beginCaptures":{"0":{"name":"support.function.nix"}}},{"begin":"\\b[0-9]+\\b","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#expression-cont"}],"beginCaptures":{"0":{"name":"constant.numeric.nix"}}}]},"expression":{"patterns":[{"include":"#parens-and-cont"},{"include":"#list-and-cont"},{"include":"#string"},{"include":"#interpolation"},{"include":"#with-assert"},{"include":"#function-for-sure"},{"include":"#attrset-for-sure"},{"include":"#attrset-or-function"},{"include":"#let"},{"include":"#if"},{"include":"#operator-unary"},{"include":"#constants"},{"include":"#bad-reserved"},{"include":"#parameter-name-and-cont"},{"include":"#others"}]},"expression-cont":{"begin":"(?=.?)","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#parens"},{"include":"#list"},{"include":"#string"},{"include":"#interpolation"},{"include":"#function-for-sure"},{"include":"#attrset-for-sure"},{"include":"#attrset-or-function"},{"name":"keyword.operator.nix","match":"(\\bor\\b|\\.|==|!=|!|\\\u003c\\=|\\\u003c|\\\u003e\\=|\\\u003e|\u0026\u0026|\\|\\||-\\\u003e|//|\\?|\\+\\+|-|\\*|/(?=([^*]|$))|\\+)"},{"include":"#constants"},{"include":"#bad-reserved"},{"include":"#parameter-name"},{"include":"#others"}]},"function-body":{"begin":"(@\\s*([a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*)\\s*)?(\\:)","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#expression"}]},"function-body-from-colon":{"begin":"(\\:)","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#expression"}],"beginCaptures":{"0":{"name":"punctuation.definition.function.nix"}}},"function-contents":{"patterns":[{"include":"#bad-reserved"},{"include":"#function-parameter"},{"include":"#others"}]},"function-definition":{"begin":"(?=.?)","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#function-body-from-colon"},{"begin":"(?=.?)","end":"(?=\\:)","patterns":[{"begin":"(\\b[a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*)","end":"(?=\\:)","patterns":[{"begin":"\\@","end":"(?=\\:)","patterns":[{"include":"#function-header-until-colon-no-arg"},{"include":"#others"}]},{"include":"#others"}],"beginCaptures":{"0":{"name":"variable.parameter.function.4.nix"}}},{"begin":"(?=\\{)","end":"(?=\\:)","patterns":[{"include":"#function-header-until-colon-with-arg"}]}]},{"include":"#others"}]},"function-definition-brace-opened":{"begin":"(?=.?)","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#function-body-from-colon"},{"begin":"(?=.?)","end":"(?=\\:)","patterns":[{"include":"#function-header-close-brace-with-arg"},{"begin":"(?=.?)","end":"(?=\\})","patterns":[{"include":"#function-contents"}]}]},{"include":"#others"}]},"function-for-sure":{"patterns":[{"begin":"(?=(\\b[a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*\\s*[:@]|\\{[^}]*\\}\\s*:|\\{[^#}\"'/=]*[,\\?]))","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#function-definition"}]}]},"function-header-close-brace-no-arg":{"begin":"\\}","end":"(?=\\:)","patterns":[{"include":"#others"}],"beginCaptures":{"0":{"name":"punctuation.definition.entity.function.nix"}}},"function-header-close-brace-with-arg":{"begin":"\\}","end":"(?=\\:)","patterns":[{"include":"#function-header-terminal-arg"},{"include":"#others"}],"beginCaptures":{"0":{"name":"punctuation.definition.entity.function.nix"}}},"function-header-open-brace":{"begin":"\\{","end":"(?=\\})","patterns":[{"include":"#function-contents"}],"beginCaptures":{"0":{"name":"punctuation.definition.entity.function.2.nix"}}},"function-header-terminal-arg":{"begin":"(?=@)","end":"(?=\\:)","patterns":[{"begin":"\\@","end":"(?=\\:)","patterns":[{"name":"variable.parameter.function.3.nix","begin":"(\\b[a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*)","end":"(?=\\:)"},{"include":"#others"}]},{"include":"#others"}]},"function-header-until-colon-no-arg":{"begin":"(?=\\{)","end":"(?=\\:)","patterns":[{"include":"#function-header-open-brace"},{"include":"#function-header-close-brace-no-arg"}]},"function-header-until-colon-with-arg":{"begin":"(?=\\{)","end":"(?=\\:)","patterns":[{"include":"#function-header-open-brace"},{"include":"#function-header-close-brace-with-arg"}]},"function-parameter":{"patterns":[{"name":"keyword.operator.nix","begin":"(\\.\\.\\.)","end":"(,|(?=\\}))","patterns":[{"include":"#others"}]},{"begin":"\\b[a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*","end":"(,|(?=\\}))","patterns":[{"include":"#whitespace"},{"include":"#comment"},{"include":"#function-parameter-default"},{"include":"#expression"}],"beginCaptures":{"0":{"name":"variable.parameter.function.1.nix"}},"endCaptures":{"0":{"name":"keyword.operator.nix"}}},{"include":"#others"}]},"function-parameter-default":{"begin":"\\?","end":"(?=[,}])","patterns":[{"include":"#expression"}],"beginCaptures":{"0":{"name":"keyword.operator.nix"}}},"if":{"begin":"(?=\\bif\\b)","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"begin":"\\bif\\b","end":"\\bth(?=en\\b)","patterns":[{"include":"#expression"}],"beginCaptures":{"0":{"name":"keyword.other.nix"}},"endCaptures":{"0":{"name":"keyword.other.nix"}}},{"begin":"(?\u003c=th)en\\b","end":"\\bel(?=se\\b)","patterns":[{"include":"#expression"}],"beginCaptures":{"0":{"name":"keyword.other.nix"}},"endCaptures":{"0":{"name":"keyword.other.nix"}}},{"begin":"(?\u003c=el)se\\b","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#expression"}],"beginCaptures":{"0":{"name":"keyword.other.nix"}},"endCaptures":{"0":{"name":"keyword.other.nix"}}}]},"illegal":{"name":"invalid.illegal","match":"."},"interpolation":{"name":"markup.italic","begin":"\\$\\{","end":"\\}","patterns":[{"include":"#expression"}],"beginCaptures":{"0":{"name":"punctuation.section.embedded.begin.nix"}},"endCaptures":{"0":{"name":"punctuation.section.embedded.end.nix"}}},"let":{"begin":"(?=\\blet\\b)","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"begin":"\\blet\\b","end":"(?=([\\])};,]|\\b(in|else|then)\\b))","patterns":[{"begin":"(?=\\{)","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"begin":"\\{","end":"\\}","patterns":[{"include":"#attrset-contents"}]},{"begin":"(^|(?\u003c=\\}))","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#expression-cont"}]},{"include":"#others"}]},{"include":"#attrset-contents"},{"include":"#others"}],"beginCaptures":{"0":{"name":"keyword.other.nix"}}},{"begin":"\\bin\\b","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#expression"}],"beginCaptures":{"0":{"name":"keyword.other.nix"}}}]},"list":{"begin":"\\[","end":"\\]","patterns":[{"include":"#expression"}],"beginCaptures":{"0":{"name":"punctuation.definition.list.nix"}},"endCaptures":{"0":{"name":"punctuation.definition.list.nix"}}},"list-and-cont":{"begin":"(?=\\[)","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#list"},{"include":"#expression-cont"}]},"operator-unary":{"name":"keyword.operator.unary.nix","match":"(!|-)"},"others":{"patterns":[{"include":"#whitespace"},{"include":"#comment"},{"include":"#illegal"}]},"parameter-name":{"match":"\\b[a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*","captures":{"0":{"name":"variable.parameter.name.nix"}}},"parameter-name-and-cont":{"begin":"\\b[a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#expression-cont"}],"beginCaptures":{"0":{"name":"variable.parameter.name.nix"}}},"parens":{"begin":"\\(","end":"\\)","patterns":[{"include":"#expression"}],"beginCaptures":{"0":{"name":"punctuation.definition.expression.nix"}},"endCaptures":{"0":{"name":"punctuation.definition.expression.nix"}}},"parens-and-cont":{"begin":"(?=\\()","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#parens"},{"include":"#expression-cont"}]},"string":{"patterns":[{"begin":"(?=\\'\\')","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"name":"string.quoted.other.nix","begin":"\\'\\'","end":"\\'\\'(?!\\$|\\'|\\\\.)","patterns":[{"name":"constant.character.escape.nix","match":"\\'\\'(\\$|\\'|\\\\.)"},{"include":"#interpolation"}],"beginCaptures":{"0":{"name":"punctuation.definition.string.other.start.nix"}},"endCaptures":{"0":{"name":"punctuation.definition.string.other.end.nix"}}},{"include":"#expression-cont"}]},{"begin":"(?=\\\")","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#string-quoted"},{"include":"#expression-cont"}]},{"begin":"(~?[a-zA-Z0-9\\.\\_\\-\\+]*(\\/[a-zA-Z0-9\\.\\_\\-\\+]+)+)","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#expression-cont"}],"beginCaptures":{"0":{"name":"string.unquoted.path.nix"}}},{"begin":"(\\\u003c[a-zA-Z0-9\\.\\_\\-\\+]+(\\/[a-zA-Z0-9\\.\\_\\-\\+]+)*\\\u003e)","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#expression-cont"}],"beginCaptures":{"0":{"name":"string.unquoted.spath.nix"}}},{"begin":"([a-zA-Z][a-zA-Z0-9\\+\\-\\.]*\\:[a-zA-Z0-9\\%\\/\\?\\:\\@\\\u0026\\=\\+\\$\\,\\-\\_\\.\\!\\~\\*\\']+)","end":"(?=([\\])};,]|\\b(else|then)\\b))","patterns":[{"include":"#expression-cont"}],"beginCaptures":{"0":{"name":"string.unquoted.url.nix"}}}]},"string-quoted":{"name":"string.quoted.double.nix","begin":"\\\"","end":"\\\"","patterns":[{"name":"constant.character.escape.nix","match":"\\\\."},{"include":"#interpolation"}],"beginCaptures":{"0":{"name":"punctuation.definition.string.double.start.nix"}},"endCaptures":{"0":{"name":"punctuation.definition.string.double.end.nix"}}},"whitespace":{"match":"\\s+"},"with-assert":{"begin":"(?\u003c![\\w'-])(with|assert)(?![\\w'-])","end":"\\;","patterns":[{"include":"#expression"}],"beginCaptures":{"0":{"name":"keyword.other.nix"}}}}}
