{"name":"Protocol Buffer 3","scopeName":"source.proto","patterns":[{"include":"#comments"},{"include":"#syntax"},{"include":"#package"},{"include":"#import"},{"include":"#optionStmt"},{"include":"#message"},{"include":"#enum"},{"include":"#service"}],"repository":{"comments":{"patterns":[{"name":"comment.block.proto","begin":"/\\*","end":"\\*/"},{"name":"comment.line.double-slash.proto","begin":"//","end":"$\\n?"}]},"constants":{"name":"constant.language.proto","match":"\\b(true|false|max|[A-Z_]+)\\b"},"enum":{"begin":"(enum)(\\s+)([A-Za-z][A-Za-z0-9_]*)(\\s*)(\\{)?","end":"\\}","patterns":[{"include":"#reserved"},{"include":"#optionStmt"},{"include":"#comments"},{"begin":"([A-Za-z][A-Za-z0-9_]*)\\s*=\\s*(0[xX][0-9a-fA-F]+|[0-9]+)","end":";","patterns":[{"include":"#fieldOptions"}],"beginCaptures":{"1":{"name":"variable.other.proto"},"2":{"name":"constant.numeric.proto"}}}],"beginCaptures":{"1":{"name":"keyword.other.proto"},"3":{"name":"entity.name.class.proto"}}},"field":{"begin":"\\s*(optional|repeated|required)?\\s*\\b([\\w.]+)\\s+(\\w+)\\s*=\\s*(0[xX][0-9a-fA-F]+|[0-9]+)","end":";","patterns":[{"include":"#fieldOptions"}],"beginCaptures":{"1":{"name":"storage.modifier.proto"},"2":{"name":"storage.type.proto"},"3":{"name":"variable.other.proto"},"4":{"name":"constant.numeric.proto"}}},"fieldOptions":{"begin":"\\[","end":"\\]","patterns":[{"include":"#constants"},{"include":"#number"},{"include":"#string"},{"include":"#subMsgOption"},{"include":"#optionName"}]},"ident":{"name":"entity.name.class.proto","match":"[A-Za-z][A-Za-z0-9_]*"},"import":{"match":"\\s*(import)\\s+(weak|public)?\\s*(\"[^\"]+\")\\s*;","captures":{"1":{"name":"keyword.other.proto"},"2":{"name":"keyword.other.proto"},"3":{"name":"string.quoted.double.proto.import"}}},"kv":{"begin":"(\\w+)\\s*:","end":";|,|(?=[}/_a-zA-Z])","patterns":[{"include":"#constants"},{"include":"#number"},{"include":"#string"},{"include":"#subMsgOption"}],"beginCaptures":{"1":{"name":"keyword.other.proto"}}},"mapfield":{"begin":"\\s*(map)\\s*\u003c\\s*([\\w.]+)\\s*,\\s*([\\w.]+)\\s*\u003e\\s+(\\w+)\\s*=\\s*(\\d+)","end":";","patterns":[{"include":"#fieldOptions"}],"beginCaptures":{"1":{"name":"storage.type.proto"},"2":{"name":"storage.type.proto"},"3":{"name":"storage.type.proto"},"4":{"name":"variable.other.proto"},"5":{"name":"constant.numeric.proto"}}},"message":{"begin":"(message|extend)(\\s+)([A-Za-z_][A-Za-z0-9_.]*)(\\s*)(\\{)?","end":"\\}","patterns":[{"include":"#reserved"},{"include":"$self"},{"include":"#enum"},{"include":"#optionStmt"},{"include":"#comments"},{"include":"#oneof"},{"include":"#field"},{"include":"#mapfield"}],"beginCaptures":{"1":{"name":"keyword.other.proto"},"3":{"name":"entity.name.class.message.proto"}}},"method":{"begin":"(rpc)\\s+([A-Za-z][A-Za-z0-9_]*)","end":"\\}|;","patterns":[{"include":"#comments"},{"include":"#optionStmt"},{"include":"#rpcKeywords"},{"include":"#ident"}],"beginCaptures":{"1":{"name":"keyword.other.proto"},"2":{"name":"entity.name.function"}}},"number":{"name":"constant.numeric.proto","match":"\\b((0(x|X)[0-9a-fA-F]*)|(([0-9]+\\.?[0-9]*)|(\\.[0-9]+))((e|E)(\\+|-)?[0-9]+)?)\\b"},"oneof":{"begin":"(oneof)\\s+([A-Za-z][A-Za-z0-9_]*)\\s*\\{?","end":"\\}","patterns":[{"include":"#optionStmt"},{"include":"#comments"},{"include":"#field"}],"beginCaptures":{"1":{"name":"keyword.other.proto"},"2":{"name":"variable.other.proto"}}},"optionName":{"match":"(\\w+|\\(\\w+(\\.\\w+)*\\))(\\.\\w+)*","captures":{"1":{"name":"support.other.proto"},"2":{"name":"support.other.proto"},"3":{"name":"support.other.proto"}}},"optionStmt":{"begin":"(option)\\s+(\\w+|\\(\\w+(\\.\\w+)*\\))(\\.\\w+)*\\s*=","end":";","patterns":[{"include":"#constants"},{"include":"#number"},{"include":"#string"},{"include":"#subMsgOption"}],"beginCaptures":{"1":{"name":"keyword.other.proto"},"2":{"name":"support.other.proto"},"3":{"name":"support.other.proto"},"4":{"name":"support.other.proto"}}},"package":{"match":"\\s*(package)\\s+([\\w.]+)\\s*;","captures":{"1":{"name":"keyword.other.proto"},"2":{"name":"string.unquoted.proto.package"}}},"reserved":{"begin":"(reserved)\\s+","end":";","patterns":[{"match":"(\\d+)(\\s+(to)\\s+(\\d+))?","captures":{"1":{"name":"constant.numeric.proto"},"3":{"name":"keyword.other.proto"},"4":{"name":"constant.numeric.proto"}}},{"include":"#string"}],"beginCaptures":{"1":{"name":"keyword.other.proto"}}},"rpcKeywords":{"name":"keyword.other.proto","match":"\\b(stream|returns)\\b"},"service":{"begin":"(service)\\s+([A-Za-z][A-Za-z0-9_.]*)\\s*\\{?","end":"\\}","patterns":[{"include":"#comments"},{"include":"#optionStmt"},{"include":"#method"}],"beginCaptures":{"1":{"name":"keyword.other.proto"},"2":{"name":"entity.name.class.message.proto"}}},"storagetypes":{"name":"storage.type.proto","match":"\\b(double|float|int32|int64|uint32|uint64|sint32|sint64|fixed32|fixed64|sfixed32|sfixed64|bool|string|bytes)\\b"},"string":{"name":"string.quoted.double.proto","match":"('([^']|\\')*')|(\"([^\"]|\\\")*\")"},"subMsgOption":{"begin":"\\{","end":"\\}","patterns":[{"include":"#kv"},{"include":"#comments"}]},"syntax":{"match":"\\s*(syntax)\\s*=\\s*(\"proto[23]\")\\s*;","captures":{"1":{"name":"keyword.other.proto"},"2":{"name":"string.quoted.double.proto.syntax"}}}}}
