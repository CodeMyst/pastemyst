{"name":"ZIL","scopeName":"source.zil","patterns":[{"include":"#expressions"}],"repository":{"argspec":{"name":"meta.parameters.zil","begin":"\\(","end":"\\)","patterns":[{"name":"variable.parameter.local.symbol.atom.zil","match":"(?x)\n# optional quote\n(?:'\\s*)?\n# atom\n(?:\\\\.|[^!. \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])\n(?:\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])*+"},{"name":"meta.binding.zil","begin":"(?x)\n(\\()\n\\s*\n# optional quote\n(?:'\\s*)?\n# atom\n((?:\\\\.|[^!. \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])\n (?:\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])*+)","end":"\\)","patterns":[{"include":"#expressions"}],"beginCaptures":{"1":{"name":"punctuation.definition.list.parameter.begin.zil"},"2":{"name":"variable.parameter.local.symbol.atom.zil"}},"endCaptures":{"0":{"name":"punctuation.definition.list.parameter.end.zil"}}},{"name":"punctuation.separator.arguments.aux.zil keyword.separator.arguments.aux.zil","match":"\"(?:AUX|EXTRA)\""},{"name":"punctuation.separator.arguments.opt.zil keyword.separator.arguments.opt.zil","match":"\"(?:OPT|OPTIONAL)\""},{"name":"punctuation.separator.arguments.varargs.zil keyword.separator.arguments.varargs.zil","match":"\"(?:ARGS|TUPLE)\""},{"name":"punctuation.separator.arguments.misc.zil keyword.separator.arguments.misc.zil","match":"\"(?:NAME|BIND)\""},{"include":"#expressions"}],"beginCaptures":{"0":{"name":"punctuation.definition.list.parameters.begin.zil"}},"endCaptures":{"0":{"name":"punctuation.definition.list.parameters.end.zil"}}},"atom":{"name":"meta.symbol.atom.zil","match":"(?x)\n# atom can start with anything escaped, or any non-delimiter\n(?:\\\\.|[^!. \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])\n# and continue with any of the above as well as '!' and '.'\n(?:\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])*+"},"binary_num":{"name":"constant.numeric.binary.zil","match":"(#)\\s*0*2\\s+[01]+(?![^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])","captures":{"1":{"name":"punctuation.definition.constant.numeric.binary.zil"}}},"char":{"name":"constant.character.zil","match":"!\\\\."},"comment":{"name":"comment.block.zil","begin":";","end":"(?\u003c!\\G)","patterns":[{"include":"#unstyled_expressions"}],"beginCaptures":{"0":{"name":"punctuation.definition.comment.prefix.zil"}},"applyEndPatternLast":true},"constants":{"patterns":[{"include":"#decimal_num"},{"include":"#octal_num"},{"include":"#binary_num"},{"include":"#string"},{"include":"#char"},{"include":"#else"},{"include":"#false"},{"include":"#true"},{"include":"#atom"}]},"decimal_num":{"name":"constant.numeric.decimal.zil","match":"-?([0-9]+)(?![^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])"},"else":{"name":"keyword.control.else.zil","match":"(?\u003c=\\()(?:ELSE|T)\\b"},"expressions":{"patterns":[{"include":"#constants"},{"include":"#structures"},{"include":"#prefixes"},{"include":"#invalid"}]},"false":{"name":"constant.language.boolean.false.zil","match":"\u003c\\s*\u003e"},"form":{"name":"meta.structure.form.zil","begin":"\u003c","end":"!?\u003e","patterns":[{"include":"#special_form_body"},{"include":"#expressions"}],"beginCaptures":{"0":{"name":"punctuation.definition.form.begin.zil"}},"endCaptures":{"0":{"name":"punctuation.definition.form.end.zil"}}},"gval":{"name":"variable.other.global.zil","begin":"(,)\\s*","end":"(?\u003c!\\G)","patterns":[{"include":"#unstyled_expressions"}],"beginCaptures":{"1":{"name":"punctuation.definition.variable.global.prefix.zil"}},"applyEndPatternLast":true},"invalid":{"patterns":[{"name":"invalid.illegal.zil","match":"!."}]},"list":{"name":"meta.structure.list.zil","begin":"!?\\(","end":"!?\\)","patterns":[{"include":"#expressions"}],"beginCaptures":{"0":{"name":"punctuation.definition.list.begin.zil"}},"endCaptures":{"0":{"name":"punctuation.definition.list.end.zil"}}},"lval":{"name":"variable.other.local.zil","begin":"(\\.)\\s*","end":"(?\u003c!\\G)","patterns":[{"include":"#unstyled_expressions"}],"beginCaptures":{"1":{"name":"punctuation.definition.variable.local.prefix.zil"}},"applyEndPatternLast":true},"macro":{"name":"meta.macro.zil","begin":"(%)|(%%)","end":"(?\u003c!\\G)","patterns":[{"include":"#unstyled_expressions"}],"beginCaptures":{"1":{"name":"punctuation.definition.macro.single.prefix.zil"},"2":{"name":"punctuation.definition.macro.double.prefix.zil"}},"applyEndPatternLast":true},"octal_num":{"name":"constant.numeric.octal.zil","match":"(\\*)([0-7]+)(\\*)(?![^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])","captures":{"1":{"name":"punctuation.definition.constant.numeric.octal.zil"},"3":{"name":"punctuation.definition.constant.numeric.octal.zil"}}},"prefixes":{"patterns":[{"include":"#comment"},{"include":"#macro"},{"include":"#lval"},{"include":"#gval"},{"include":"#quote"},{"include":"#segment"}]},"property":{"name":"meta.property.zil","begin":"(?xi)\n\\( \\s*\n(?: (IN|LOC|DESC|SYNONYM|ADJECTIVE|FLAGS|\n     GLOBAL|GENERIC|ACTION|DESCFCN|CONTFCN|LDESC|FDESC|\n     NORTH|SOUTH|EAST|WEST|OUT|UP|DOWN|NW|SW|NE|SE)\n|   ((?:\\\\.|[^!. \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])\n     (?:\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])*+)\n)\n\\b","end":"\\)","patterns":[{"include":"$self"}],"beginCaptures":{"1":{"name":"storage.property.${1:/downcase}.zil"},"2":{"name":"meta.object-literal.key.zil"}}},"quote":{"name":"meta.quoted-expression.zil","begin":"'","end":"(?\u003c!\\G)","patterns":[{"include":"#unstyled_expressions"}],"beginCaptures":{"0":{"name":"punctuation.definition.quote.prefix.zil"}},"applyEndPatternLast":true},"segment":{"name":"meta.structure.segment.zil","begin":"!(?=[.,\u003c])","end":"(?\u003c!\\G)","patterns":[{"include":"#unstyled_expressions"}],"beginCaptures":{"0":{"name":"punctuation.definition.segment.prefix.zil"}},"applyEndPatternLast":true},"skip_ws":{"match":"\\s+"},"special_form_body":{"patterns":[{"name":"keyword.operator.arithmetic.${1:/downcase}.zil","match":"(?xi)\n(?\u003c=\u003c) \\s* (?:FORM\\s+)?\n(\\+|-|\\*|/|MOD|MIN|MAX|OR\\?|AND\\?)\n(?!\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])"},{"name":"keyword.operator.bitwise.${1:/downcase}.zil","match":"(?xi)\n(?\u003c=\u003c) \\s* (?:FORM\\s+)?\n(BAND|BOR|ANDB|ORB|LSH|XORB|EQVB)\n(?!\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])"},{"name":"keyword.operator.comparison.${1:/downcase}.zil","match":"(?xi)\n(?\u003c=\u003c) \\s* (?:FORM\\s+)?\n(==?|N==?|L=?|G=?|[01TF])\\?\n(?!\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])"},{"name":"keyword.control.${1:/downcase}.zil","match":"(?xi) \\s*\n(?\u003c=\u003c) \\s* (?:FORM\\s+)?\n(COND|BIND|PROG|REPEAT|DO|MAP[FR]|MAP-(?:CONTENTS|DIRECTIONS)|\n AGAIN|RETURN|RTRUE|RFALSE|CATCH|THROW|EVAL|AND|OR|NOT)\n(?!\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])"},{"name":"keyword.output.${1:/downcase}.zil","match":"(?xi) \\s*\n(?\u003c=\u003c) \\s* (?:FORM\\s+)?\n(TELL(?:-TOKENS)?|ADD-TELL-TOKENS|CRLF|PRINT[INR]?|PRIN[C1])\n(?!\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])"},{"name":"keyword.zmodel.${1:/downcase}.zil","match":"(?xi) \\s*\n(?\u003c=\u003c) \\s* (?:FORM\\s+)?\n(FSET\\??|FCLEAR|MOVE|REMOVE|IN\\?|FIRST\\?|NEXT\\?|\n PUTP|GETP|PROPDEF|GETPT|PTSIZE|INTBL\\?|\n P?L?TABLE|ITABLE|GETB?|GET/B|PUTB?|PUT/B|ZGET|ZPUT|\n VOC|SYNONYM|(?:VERB|PREP|ADJ|DIR|BIT)-SYNONYM|DIRECTIONS|BUZZ)\n(?!\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])"},{"name":"keyword.meta.${1:/downcase}.zil","match":"(?xi) \\s*\n(?\u003c=\u003c) \\s* (?:FORM\\s+)?\n(INSERT-FILE|PACKAGE|ENDPACKAGE|USE|ENTRY|RENTRY|VERSION|\n COMPILATION-FLAG(?:-DEFAULT)?|REPLACE-DEFINITION|DELAY-DEFINITION|DEFAULT-DEFINITION|\n IF-(?:[A-Z0-9][-A-Z0-9]+))\n(?!\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])"},{"name":"meta.function.zil","begin":"(?xi)\n(?\u003c=\u003c) \\s* (?:FORM\\s+)?\n# function type (1)\n(DEFINE|DEFINE20|DEFMAC|ROUTINE)\n\\s+\n# function name atom (2)\n((?:\\\\.|[^!. \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])\n (?:\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])*+)\n\\s*\n# optional activation atom (3)\n(?:\n    (?\u003c=\\s)\n    ((?:\\\\.|[^!. \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])\n     (?:\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])*+)\n     \\s*\n)?\n# followed by paren starting arg spec\n(?=\\()","end":"(?\u003c=\\))|(?=\\\u003e)","patterns":[{"include":"#argspec"}],"beginCaptures":{"1":{"name":"keyword.definition.function.${1:/downcase}.zil"},"2":{"name":"entity.name.function.zil"},"3":{"name":"entity.name.variable.local.activation-atom.zil"}}},{"name":"meta.object.zil","begin":"(?xi)\n(?\u003c=\u003c) \\s* (?:FORM\\s+)?\n# object type (1)\n(OBJECT|ROOM)\n\\s+\n# object name (2)\n((?:\\\\.|[^!. \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])\n (?:\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])*+)\n\\s*","end":"(?=\\\u003e)","patterns":[{"include":"#property"}],"beginCaptures":{"1":{"name":"keyword.definition.object.${1:/downcase}.zil"},"2":{"name":"entity.name.object.zil"}}},{"match":"(?xi)\n(?\u003c=\u003c) \\s* (?:FORM\\s+)?\n# global type (1)\n(SETG|CONSTANT|GLOBAL|GASSIGNED\\?|GUNASSIGN)\n\\s+\n# global name atom (2)\n((?:\\\\.|[^!. \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])\n (?:\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])*+)?","captures":{"1":{"name":"keyword.definition.global.${1:/downcase}.zil"},"2":{"name":"entity.name.variable.global.zil variable.global.zil"}}},{"match":"(?xi)\n(?\u003c=\u003c) \\s* (?:FORM\\s+)?\n# local type?\n(SET|ASSIGNED\\?|UNASSIGN)\n\\s+\n# local name atom (2)\n((?:\\\\.|[^!. \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])\n (?:\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])*+)?","captures":{"1":{"name":"keyword.definition.local.${1:/downcase}.zil"},"2":{"name":"entity.name.variable.local.zil variable.local.zil"}}},{"match":"(?xi)\n(?\u003c=\u003c) \\s* (?:FORM\\s+)?\n(CHTYPE|TYPE\\??|PRIMTYPE)\n(?!\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])","captures":{"1":{"name":"keyword.type.${1:/downcase}.zil"}}},{"match":"(?xi)\n(?\u003c=\u003c) \\s* (?:FORM\\s+)?\n# keyword (1)\n(NEWTYPE|DEFSTRUCT|APPLYTYPE|EVALTYPE|PRINTTYPE|TYPEPRIM)\n\\s+\n# type name atom (2)\n((?:\\\\.|[^!. \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])\n (?:\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])*+)?\n(?!\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])","captures":{"1":{"name":"keyword.definition.type.${1:/downcase}.zil"},"2":{"name":"entity.name.type.zil"}}},{"match":"(?xi)\n(?\u003c=\u003c) \\s* (?:FORM\\s+)?\n(SYNTAX)\n\\s+\n# verb word\n((?:\\\\.|[^!. \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])\n (?:\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])*+)\n# first object\n(?:\n    (?!\\s*=\\b)\n    # prep 1\n    (?:\\s+ (?!OBJECT\\b)(\\S+))?\n    # obj 1\n    \\s+ (OBJECT)\n    # flags/search options 1\n    (\\s* \\( [^)]* \\) )*\n)?+\n# second object\n(?:\n    (?!\\s*=\\b)\n    # prep 2\n    (?:\\s+ (?!OBJECT\\b)(\\S+))?\n    # obj 2\n    \\s+ (OBJECT)\n    # flags/search options 2\n    (\\s* \\( [^)]* \\) )*\n)?+\n# handlers\n(?:\n    \\s+ =\n    # action\n    \\s+\n    ((?:\\\\.|[^!. \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])\n     (?:\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])*+)\n    # preaction\n    (?:\n        \\s+\n        ((?:\\\\.|[^!. \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])\n         (?:\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])*+)\n    )?+\n    # name\n    (?:\n        \\s+\n        ((?:\\\\.|[^!. \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])\n         (?:\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])*+)\n    )?+\n)?+","captures":{"1":{"name":"keyword.definition.vocab.syntax.zil"},"10":{"name":"entity.name.function.preaction.zil"},"11":{"name":"entity.name.verb.zil"},"2":{"name":"entity.name.verb.zil"},"3":{"name":"entity.name.preposition.zil"},"4":{"name":"keyword.definition.vocab.object.zil"},"6":{"name":"entity.name.preposition.zil"},"7":{"name":"keyword.definition.vocab.object.zil"},"9":{"name":"entity.name.function.action.zil"}}}]},"string":{"name":"string.quoted.double.zil","begin":"\"","end":"\"","patterns":[{"name":"constant.character.escape.zil","match":"\\\\."}],"beginCaptures":{"0":{"name":"punctuation.definition.string.begin.zil"}},"endCaptures":{"0":{"name":"punctuation.definition.string.end.zil"}}},"structures":{"patterns":[{"include":"#list"},{"include":"#form"},{"include":"#vector"},{"include":"#uvector"},{"include":"#segment"}]},"true":{"name":"constant.language.boolean.true.zil","match":"\\bT\\b"},"unstyled_atom":{"match":"(?x)\n# atom can start with anything escaped, or any non-delimiter\n(?:\\\\.|[^!. \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])\n# and continue with any of the above as well as '!' and '.'\n(?:\\\\.|[^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])*+"},"unstyled_char":{"match":"!\\\\."},"unstyled_constants":{"patterns":[{"include":"#unstyled_numeric"},{"include":"#unstyled_string"},{"include":"#unstyled_char"},{"include":"#unstyled_atom"}]},"unstyled_expressions":{"patterns":[{"include":"#unstyled_constants"},{"include":"#unstyled_structures"},{"include":"#unstyled_prefixes"},{"include":"#invalid"}]},"unstyled_form":{"begin":"\u003c","end":"!?\u003e","patterns":[{"include":"#unstyled_expressions"}]},"unstyled_gval":{"begin":"(,)\\s*","end":"(?\u003c!\\G)","patterns":[{"include":"#unstyled_expressions"}],"applyEndPatternLast":true},"unstyled_list":{"begin":"!?\\(","end":"!?\\)","patterns":[{"include":"#unstyled_expressions"}]},"unstyled_lval":{"begin":"\\.","end":"(?\u003c!\\G)","patterns":[{"include":"#unstyled_expressions"}],"applyEndPatternLast":true},"unstyled_numeric":{"match":"(?:\\b-?[0-9]+\\b|\\*[0-7]+\\*|#\\s*0*2\\s+[01]+)(?![^ \\t-\\r,#':;%()\\[\\]\u003c\u003e\\{\\}\"])"},"unstyled_prefixes":{"patterns":[{"include":"#comment"},{"include":"#macro"},{"include":"#unstyled_lval"},{"include":"#unstyled_gval"},{"include":"#unstyled_quote"},{"include":"#unstyled_segment"}]},"unstyled_quote":{"begin":"'","end":"(?\u003c!\\G)","patterns":[{"include":"#unstyled_expressions"}],"applyEndPatternLast":true},"unstyled_segment":{"begin":"!(?=[.,\u003c])","end":"(?\u003c!\\G)","patterns":[{"include":"#unstyled_expressions"}],"applyEndPatternLast":true},"unstyled_string":{"begin":"\"","end":"\"","patterns":[{"match":"\\\\."}]},"unstyled_structures":{"patterns":[{"include":"#unstyled_list"},{"include":"#unstyled_form"},{"include":"#unstyled_vector"},{"include":"#unstyled_uvector"},{"include":"#unstyled_segment"}]},"unstyled_uvector":{"begin":"!\\[","end":"!?\\]","patterns":[{"include":"#unstyled_expressions"}]},"unstyled_vector":{"begin":"\\[","end":"!?\\]","patterns":[{"include":"#unstyled_expressions"}]},"uvector":{"name":"meta.structure.array.uvector.zil","begin":"!\\[","end":"!?\\]","patterns":[{"include":"#expressions"}],"beginCaptures":{"0":{"name":"punctuation.definition.array.uvector.begin.zil"}},"endCaptures":{"0":{"name":"punctuation.definition.array.uvector.end.zil"}}},"vector":{"name":"meta.structure.array.vector.zil","begin":"\\[","end":"!?\\]","patterns":[{"include":"#expressions"}],"beginCaptures":{"0":{"name":"punctuation.definition.array.vector.begin.zil"}},"endCaptures":{"0":{"name":"punctuation.definition.array.vector.end.zil"}}}}}
